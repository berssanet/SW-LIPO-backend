<?xml version="1.0" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <!-- Profile -->
        <service id="LipoMigration64\Profile\Shopware64\Shopware64Profile">
            <tag name="shopware.migration.profile"/>
        </service>

        <!-- 
            NOTE: We do NOT register a custom gateway.
            By implementing ShopwareProfileInterface, our profile uses the existing
            ShopwareLocalGateway which provides the database credentials form.
        -->

        <!-- ==================== PRODUCTS ==================== -->

        <!-- Product DataSelection -->
        <service id="LipoMigration64\Profile\Shopware64\DataSelection\ProductDataSelection">
            <tag name="shopware.migration.data_selection"/>
        </service>

        <!-- Product DataSet -->
        <service id="LipoMigration64\Profile\Shopware64\DataSelection\DataSet\ProductDataSet">
            <tag name="shopware.migration.data_set"/>
        </service>

        <!-- Product Reader -->
        <service id="LipoMigration64\Profile\Shopware64\Gateway\Reader\ProductReader"
                 parent="SwagMigrationAssistant\Profile\Shopware\Gateway\Local\Reader\AbstractReader">
            <tag name="shopware.migration.reader"/>
        </service>

        <!-- Product Converter -->
        <service id="LipoMigration64\Profile\Shopware64\Converter\ProductConverter">
            <argument type="service" id="SwagMigrationAssistant\Migration\Mapping\MappingService"/>
            <argument type="service" id="SwagMigrationAssistant\Migration\Logging\LoggingService"/>
            <tag name="shopware.migration.converter"/>
        </service>

        <!-- ==================== CUSTOMERS ==================== -->

        <!-- Customer DataSelection -->
        <service id="LipoMigration64\Profile\Shopware64\DataSelection\CustomerDataSelection">
            <tag name="shopware.migration.data_selection"/>
        </service>

        <!-- Customer DataSet -->
        <service id="LipoMigration64\Profile\Shopware64\DataSelection\DataSet\CustomerDataSet">
            <tag name="shopware.migration.data_set"/>
        </service>

        <!-- Customer Reader -->
        <service id="LipoMigration64\Profile\Shopware64\Gateway\Reader\CustomerReader"
                 parent="SwagMigrationAssistant\Profile\Shopware\Gateway\Local\Reader\AbstractReader">
            <tag name="shopware.migration.reader"/>
        </service>

        <!-- Customer Converter -->
        <service id="LipoMigration64\Profile\Shopware64\Converter\CustomerConverter">
            <argument type="service" id="SwagMigrationAssistant\Migration\Mapping\MappingService"/>
            <argument type="service" id="SwagMigrationAssistant\Migration\Logging\LoggingService"/>
            <tag name="shopware.migration.converter"/>
        </service>
    </services>
</container>
